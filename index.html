<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gesti√≥n de Viajes</title>
<link rel="stylesheet" href="style.css">

<style>
/* ===== BASE DE PANTALLAS (CORREGIDA) ===== */

.screen {
  display: none;
  position: absolute; 
  top: 0; left: 0;
  width: 100%;
  min-height: 100vh;
  overflow-y: auto;
  background: white;
}
.screen.active {
  display: block;
}

</style>
</head>
<body>


<!-- ================== MAIN SCREEN (ORDENADO PARA CSS LIMPIO) ================== -->
<div id="mainScreen" class="screen page-home active">


  <div class="inner">

    <!-- HEADER / LOGO -->
    <div class="logo-container">
      <h1>Gesti√≥n de Viajes</h1>
      <p>Sistema de control de flota</p>
    </div>

    <!-- ESTADO DE JORNADA -->
    <h2>Estado de la jornada</h2>

    <p id="ordenActivaInfo" class="estado-jornada">
      üî¥ Sin jornada activa
    </p>

    <!-- BOTONES DE JORNADA -->
    <div class="fila-acciones">
      <button class="btn-jornada" onclick="createOrderUI()">
        ‚ñ∂Ô∏è Iniciar Jornada
      </button>

      <button class="btn-jornada" onclick="closeActiveOrderUI()">
        ‚èπÔ∏è Cerrar Jornada
      </button>
    </div>

    <div class="separador"></div>

    <!-- OPERACIONES DEL D√çA -->
    <h2>Operaciones del d√≠a</h2>

    <div class="menu-tarjetas">

      <button class="card-btn" onclick="abrirViajeSimple()">
        üöó Nuevo Viaje
      </button>

      <button class="card-btn" onclick="showScreen('listaViajesScreen')">
        üìÑ Ver Viajes
      </button>

      <button class="card-btn" onclick="showScreen('nuevaGuardiaScreen')">
        ‚ûï Registrar Guardia
      </button>

      <button class="card-btn" onclick="showScreen('listaGuardiasScreen')">
        üïí Ver Guardias
      </button>

    </div>

  </div> <!-- cierre .inner -->

</div>
<!-- ‚úÖ FIN DEL MAIN SCREEN -->



<!-- ================== NUEVO VIAJE ================== -->
<!-- ================== NUEVO VIAJE ================== -->
<div id="travelScreen" class="screen page-form">

  <!-- BARRA SUPERIOR -->
  <div class="screen-header">
    <button class="btn-back" onclick="showScreen('mainScreen')">
      ‚Üê Volver
    </button>
  </div>

  <!-- CONTENIDO CENTRADO -->
  <div class="screen-container">

    <div class="card">

      <h2>Nuevo Viaje</h2>

      <form onsubmit="addTravelUI(event); return false;">

        <label>N¬∫ Orden</label>
        <input id="orderNumberTravels" readonly>

        <label>Origen</label>
        <select id="originTravels">
          <option value="Montevideo" selected>Montevideo</option>
          <option value="Chuy">Chuy</option>
          <option value="Punta del Este">Punta del Este</option>
          <option value="Colonia">Colonia</option>
          <option value="Piri√°polis">Piri√°polis</option>
          <option value="Otro">Otro</option>
        </select>

        <label>Destino (escrib√≠ o peg√°)</label>
        <input id="destinationTravels"
               oninput="autoKmPorDestino(false)">

        <div id="horariosOficiales"
             style="display:none; margin:10px 0; padding:8px;
                    border:1px solid #ddd; border-radius:6px;">
        </div>

        <div id="sugerenciasRutas"
             style="border:1px solid #ccc;
                    display:none;
                    background:white;
                    max-height:180px;
                    overflow:auto;
                    margin-top:5px;
                    border-radius:6px;">
        </div>

        <label>Servicio</label>
        <select id="numeroServicio" onchange="actualizarInfoServicio()">
          <option value="">Eleg√≠ servicio...</option>
          <option value="TURNO">Turno</option>
          <option value="SEMI">Semi-directo</option>
          <option value="DIRECTO">Directo (con acoplado)</option>
          <option value="EXPRESO">Expreso / Vac√≠o</option>
          <option value="CONTRATADO">Contratado (Guardia especial)</option>
          <option value="PASAJERO">Pasajero</option>
        </select>

        <label>Kil√≥metros (auto)</label>
        <input id="kmTravels" type="number" readonly>

        <label>Hora salida</label>
        <input id="departureTimeTravels" type="time">

        <label>Hora llegada</label>
        <input id="arrivalTimeTravels" type="time">

        <div style="margin:10px 0; padding:8px; border:1px solid #ddd; border-radius:6px;">
          <label>
            <input type="checkbox" id="idaYVueltaAuto">
            Generar vuelta autom√°tica
          </label>
        </div>

        <button type="submit" class="btn-primary">
          Guardar Viaje
        </button>

      </form>

    </div> <!-- fin card -->

  </div> <!-- fin screen-container -->

</div>



<!-- ================== LISTA VIAJES ================== -->
<div id="listaViajesScreen" class="screen">

  <button onclick="showScreen('mainScreen')">
    ‚Üê Volver
  </button>

  <h2>Lista de Viajes</h2>

  <div id="cardsViajesContainer"
     style="display:flex;
            flex-direction:column;
            gap:12px;
            padding:10px;">
  </div>

  <h3 style="margin-top:20px;">Resumen del d√≠a</h3>
  <div id="resumenDia"></div>

</div>

<!-- ================== GUARDIAS ================== -->
<div id="nuevaGuardiaScreen" class="screen">

  <button onclick="showScreen('mainScreen')">‚Üê Volver</button>

  <h2>Registrar Guardia</h2>

  <form onsubmit="addGuardUI(event); return false;">

    <label>D√≠a</label>
    <input id="diaGuardia" type="date">

    <label>Hora inicio</label>
    <input id="horaInicioGuardia" type="time">

    <label>Hora fin</label>
    <input id="horaFinGuardia" type="time">

    <label>Tipo de guardia</label>
    <select id="tipoGuardia" onchange="manejarDescripcionGuardia()">
      <option value="">Eleg√≠ tipo...</option>
      <option value="comun">Guardia com√∫n</option>
      <option value="especial">Guardia especial</option>
    </select>

    <div id="boxDescripcionGuardia" style="display:none; margin-top:10px;">
      <label>Descripci√≥n (solo para guardia especial)</label>
      <input 
        id="descripcionGuardia"
        placeholder="Ej: Pista, Taller, Espera, etc.">
    </div>

    <button type="submit">Guardar Guardia</button>

  </form>
</div>

<!-- ================== LISTA GUARDIAS ================== -->
<div id="listaGuardiasScreen" class="screen">

  <button onclick="showScreen('mainScreen')">
    ‚Üê Volver
  </button>

  <h2>Guardias por d√≠a</h2>

  <div id="cardsGuardiasContainer"
       style="display:flex;
              flex-direction:column;
              gap:12px;
              padding:10px;">
  </div>

</div>

<!-- ‚úÖ SPLASH QUE FALTABA (CLAVE PARA EL FIX) -->
<div id="splashScreen"></div>

<!-- ====== SCRIPTS AL FINAL ====== -->
<script src="core.js"></script>
<script src="schedules_cot.js"></script>
<script src="app_nuevo.js"></script>

</body>
</html>






































































